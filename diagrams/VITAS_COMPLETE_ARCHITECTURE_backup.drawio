<mxfile host="app.diagrams.net" agent="Q CLI" version="24.0.0">
  <diagram id="vitas-arch" name="VITAS Architecture">
    <mxGraphModel dx="3500" dy="3200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3400" pageHeight="3000">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Title -->
        <mxCell id="title" value="VITAS CLINIC - Complete System Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=32;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="40" width="2200" height="60" as="geometry"/>
        </mxCell>
        
        <!-- Frontend Layer -->
        <mxCell id="frontend-layer" value="FRONTEND - Next.js Doctor Dashboard" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;verticalAlign=top;fontSize=16;fontStyle=1;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="100" y="150" width="800" height="400" as="geometry"/>
        </mxCell>
        
        <mxCell id="frontend-icon" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#232F3D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.client;" vertex="1" parent="1">
          <mxGeometry x="300" y="220" width="80" height="78" as="geometry"/>
        </mxCell>
        
        <mxCell id="frontend-label" value="vitas-client&#xa;&#xa;• Patient Management&#xa;• SOAP Reports&#xa;• Audio Upload&#xa;• Appointment Booking" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="240" y="310" width="200" height="120" as="geometry"/>
        </mxCell>
        
        <!-- API Gateway -->
        <mxCell id="apigw-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#E7157B;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.api_gateway;" vertex="1" parent="1">
          <mxGeometry x="1100" y="300" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="apigw-label" value="API Gateway&#xa;&#xa;REST API&#xa;JWT Auth" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1050" y="390" width="180" height="80" as="geometry"/>
        </mxCell>
        
        <!-- S3 Bucket -->
        <mxCell id="s3-layer" value="STORAGE - S3 Media Processing Bucket" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=top;fontSize=16;fontStyle=1;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="100" y="650" width="800" height="450" as="geometry"/>
        </mxCell>
        
        <mxCell id="s3-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#7AA116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="300" y="730" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="s3-label" value="S3 Bucket&#xa;&#xa;• audios/&#xa;• transcripts/&#xa;• soap-reports/&#xa;• icd-diagnoses/" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="240" y="820" width="200" height="140" as="geometry"/>
        </mxCell>
        <mxCell id="stepfn-layer" value="ORCHESTRATION - Step Functions Workflows" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;verticalAlign=top;fontSize=16;fontStyle=1;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="1050" y="650" width="900" height="450" as="geometry"/>
        </mxCell>
        
        <mxCell id="stepfn1-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#E7157B;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.step_functions;" vertex="1" parent="1">
          <mxGeometry x="1180" y="730" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="stepfn1-label" value="Transcription WF&#xa;&#xa;Standard&#xa;20min timeout&#xa;OpenAI Whisper" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1120" y="820" width="200" height="120" as="geometry"/>
        </mxCell>
        
        <mxCell id="stepfn2-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#E7157B;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.step_functions;" vertex="1" parent="1">
          <mxGeometry x="1580" y="730" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="stepfn2-label" value="Analysis WF&#xa;&#xa;Express&#xa;5min timeout&#xa;Parallel SOAP+ICD" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1520" y="820" width="200" height="120" as="geometry"/>
        </mxCell>
        
        <!-- Lambda Functions -->
        <mxCell id="lambda-layer" value="COMPUTE - Lambda Functions (7 Functions)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;verticalAlign=top;fontSize=16;fontStyle=1;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="100" y="1200" width="1850" height="350" as="geometry"/>
        </mxCell>
        
        <mxCell id="lambda1-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#ED7100;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" vertex="1" parent="1">
          <mxGeometry x="220" y="1280" width="70" height="70" as="geometry"/>
        </mxCell>
        
        <mxCell id="lambda1-label" value="Transcription&#xa;&#xa;1024MB/15min" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="180" y="1360" width="150" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="lambda2-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#ED7100;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" vertex="1" parent="1">
          <mxGeometry x="520" y="1280" width="70" height="70" as="geometry"/>
        </mxCell>
        
        <mxCell id="lambda2-label" value="SOAP Report&#xa;&#xa;512MB/5min" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="480" y="1360" width="150" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="lambda3-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#ED7100;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" vertex="1" parent="1">
          <mxGeometry x="820" y="1280" width="70" height="70" as="geometry"/>
        </mxCell>
        
        <mxCell id="lambda3-label" value="ICD Diagnosis&#xa;&#xa;512MB/5min" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="780" y="1360" width="150" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="lambda4-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#ED7100;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" vertex="1" parent="1">
          <mxGeometry x="1120" y="1280" width="70" height="70" as="geometry"/>
        </mxCell>
        
        <mxCell id="lambda4-label" value="DLQ Processor&#xa;&#xa;512MB/15min" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1080" y="1360" width="150" height="80" as="geometry"/>
        </mxCell>
        
        <!-- Database Layer -->
        <mxCell id="db-layer" value="DATABASE - DynamoDB Tables" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;verticalAlign=top;fontSize=16;fontStyle=1;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="100" y="1650" width="800" height="350" as="geometry"/>
        </mxCell>
        
        <mxCell id="dynamo1-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#C925D1;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.dynamodb;" vertex="1" parent="1">
          <mxGeometry x="220" y="1730" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="dynamo1-label" value="Appointments_Table_V2&#xa;&#xa;SOAP reports&#xa;Symptoms" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="160" y="1820" width="200" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="dynamo2-icon" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#C925D1;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.dynamodb;" vertex="1" parent="1">
          <mxGeometry x="560" y="1730" width="80" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="dynamo2-label" value="Diagnosis_Table_V2&#xa;&#xa;ICD-10 codes" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="500" y="1820" width="200" height="100" as="geometry"/>
        </mxCell>
        
        <!-- External Services -->
        <mxCell id="external-layer" value="EXTERNAL INTEGRATIONS" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;verticalAlign=top;fontSize=16;fontStyle=1;spacingTop=15;" vertex="1" parent="1">
          <mxGeometry x="1050" y="1650" width="900" height="350" as="geometry"/>
        </mxCell>
        
        <mxCell id="openai" value="OpenAI&#xa;&#xa;Whisper + GPT-4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff;strokeColor=#d79b00;fontSize=12;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1150" y="1750" width="140" height="140" as="geometry"/>
        </mxCell>
        
        <mxCell id="anthropic" value="Anthropic&#xa;&#xa;Claude Haiku" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff;strokeColor=#d79b00;fontSize=12;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1430" y="1750" width="140" height="140" as="geometry"/>
        </mxCell>
        
        <mxCell id="vercel" value="Vercel&#xa;&#xa;Webhooks" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff;strokeColor=#d79b00;fontSize=12;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1710" y="1750" width="140" height="140" as="geometry"/>
        </mxCell>
        
        <!-- Chatbot Placeholder -->
        <mxCell id="chatbot-layer" value="AI CHATBOT - LangGraph (Future Integration)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;verticalAlign=top;fontSize=16;fontStyle=1;spacingTop=15;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="2100" y="150" width="700" height="400" as="geometry"/>
        </mxCell>
        
        <mxCell id="chatbot-icon" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#01A88D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.sagemaker_model;" vertex="1" parent="1">
          <mxGeometry x="2360" y="240" width="78" height="78" as="geometry"/>
        </mxCell>
        
        <mxCell id="chatbot-label" value="LangGraph Chatbot&#xa;&#xa;• WhatsApp Integration&#xa;• Appointment Booking&#xa;• Patient Queries&#xa;• Doctor Notifications" style="text;html=1;align=center;verticalAlign=top;whiteSpace=wrap;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="2300" y="330" width="200" height="140" as="geometry"/>
        </mxCell>
        
        <!-- Flow Arrows -->
        <mxCell id="flow1" value="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#0066CC;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="frontend-layer" target="apigw-icon">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="flow2" value="2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#00CC00;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="frontend-layer" target="s3-layer">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="flow3" value="3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#9933FF;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="s3-layer" target="stepfn-layer">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="flow4" value="4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#FF6600;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="stepfn-layer" target="lambda-layer">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="flow5" value="5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#CC00CC;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="lambda-layer" target="db-layer">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="flow6" value="6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;dashed=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="lambda-layer" target="external-layer">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend" value="FLOW LEGEND&#xa;&#xa;1. API Calls (Auth, CRUD)&#xa;2. Audio Upload&#xa;3. S3 Event Trigger&#xa;4. Lambda Invocation&#xa;5. Database Write&#xa;6. External API Calls" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontSize=12;spacingTop=10;spacingLeft=15;" vertex="1" parent="1">
          <mxGeometry x="2100" y="650" width="700" height="250" as="geometry"/>
        </mxCell>
        
        <!-- Key Features Box -->
        <mxCell id="features" value="KEY FEATURES&#xa;&#xa;• 24-hour SLA guarantee via DLQ processing&#xa;• Dual-provider AI (OpenAI + Anthropic fallback)&#xa;• Event-driven serverless architecture&#xa;• Parallel SOAP + ICD analysis&#xa;• Automatic retry with exponential backoff&#xa;• Real-time webhook notifications&#xa;• Comprehensive CloudWatch monitoring" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;fontSize=12;spacingTop=10;spacingLeft=15;" vertex="1" parent="1">
          <mxGeometry x="2100" y="1000" width="700" height="300" as="geometry"/>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
